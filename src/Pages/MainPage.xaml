<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="MiniPos.Pages.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:MiniPos.Models"
    xmlns:pages="using:MiniPos.Pages"
    Loaded="OnPageLoaded"
    mc:Ignorable="d">
    <Grid
        Grid.Row="1"
        Padding="32,0,32,32"
        RowSpacing="32">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <RelativePanel Grid.Row="0">
            <StackPanel Height="48" RelativePanel.AlignLeftWithPanel="True">
                <TextBlock
                    x:Uid="AppTitle"
                    FontSize="32"
                    FontWeight="Bold" />
            </StackPanel>
        </RelativePanel>

        <Grid Grid.Row="1" ColumnSpacing="16">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0">
                    <Button
                        Width="180"
                        HorizontalAlignment="Left"
                        Background="DarkRed"
                        Click="OnDiscardReceiptButtonClick"
                        Foreground="WhiteSmoke">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon
                                FontFamily="Segoe Fluent Icons"
                                FontSize="16"
                                Glyph="&#xE194;" />
                            <TextBlock x:Uid="DiscardBtn" FontSize="16" />
                        </StackPanel>
                    </Button>
                </StackPanel>

                <StackPanel Grid.Row="1" Visibility="{x:Bind ViewModel.ReceiptProductsPlaceholderVisibility, Mode=OneWay}">
                    <TextBlock
                        x:Uid="There_are_no_items_in_receipt"
                        Margin="0,16,0,0"
                        HorizontalAlignment="Center"
                        FontSize="16" />
                </StackPanel>

                <ScrollView
                    x:Name="ReceiptProductsScrollView"
                    Grid.Row="1"
                    Visibility="{x:Bind ViewModel.ReceiptProductsVisibility, Mode=OneWay}">
                    <ListView ItemsSource="{x:Bind ViewModel.ProductReceiptItemList}" SelectionMode="None">
                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="models:ProductReceiptItem">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="320" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="48" />
                                    </Grid.RowDefinitions>
                                    <TextBlock
                                        Grid.Column="0"
                                        VerticalAlignment="Center"
                                        Text="{Binding Name}" />
                                    <TextBlock
                                        Grid.Column="1"
                                        VerticalAlignment="Center"
                                        Text="{Binding Price, Converter={StaticResource DecimalToColonConverter}}" />
                                    <TextBlock
                                        Grid.Column="2"
                                        VerticalAlignment="Center"
                                        Text="{Binding Quantity, Converter={StaticResource IntToQuantityConverter}}" />
                                    <TextBlock
                                        Grid.Column="3"
                                        VerticalAlignment="Center"
                                        Text="{Binding TotalPrice, Converter={StaticResource DecimalToColonConverter}}" />

                                    <Button
                                        Grid.Column="4"
                                        Background="DarkRed"
                                        Click="OnRemoveProductButtonClick"
                                        Foreground="WhiteSmoke">
                                        <FontIcon
                                            FontFamily="Segoe Fluent Icons"
                                            FontSize="16"
                                            Glyph="&#xE74D;" />
                                    </Button>
                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </ScrollView>

                <StackPanel
                    Grid.Row="2"
                    Orientation="Horizontal"
                    Spacing="8">
                    <TextBlock
                        x:Uid="Total"
                        VerticalAlignment="Center"
                        FontSize="24" />
                    <TextBlock
                        VerticalAlignment="Center"
                        FontSize="32"
                        FontWeight="Bold"
                        Text="{x:Bind ViewModel.ReceiptTotal, Mode=OneWay, Converter={StaticResource DecimalToColonConverter}}" />
                </StackPanel>
            </Grid>

            <Grid Grid.Column="1" RowSpacing="16">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <StackPanel Grid.Row="0">
                    <TextBox
                        x:Name="EnterCodeTextBox"
                        x:Uid="Enter_code"
                        Width="360"
                        HorizontalAlignment="Left"
                        FontFamily="Consolas"
                        KeyDown="OnCodeTextBoxHitsEnter" />
                </StackPanel>

                <StackPanel Grid.Row="1" Spacing="12">
                    <StackPanel HorizontalAlignment="Left" Orientation="Vertical">
                        <TextBlock x:Uid="Code" FontSize="16" />
                        <TextBlock
                            FontFamily="Consolas"
                            FontSize="24"
                            FontWeight="Bold"
                            Text="{x:Bind ViewModel.ScannedProductCode, Mode=OneWay}" />
                    </StackPanel>

                    <StackPanel HorizontalAlignment="Left" Orientation="Vertical">
                        <TextBlock x:Uid="Item" FontSize="16" />
                        <TextBlock
                            FontSize="24"
                            FontStyle="Italic"
                            FontWeight="Bold"
                            Text="{x:Bind ViewModel.ScannedProductName, Mode=OneWay}" />
                    </StackPanel>

                    <StackPanel HorizontalAlignment="Left" Orientation="Vertical">
                        <TextBlock x:Uid="Unit_price" FontSize="16" />
                        <TextBlock
                            FontSize="24"
                            FontWeight="Bold"
                            Text="{x:Bind ViewModel.ScannedProductUnitPrice, Mode=OneWay, Converter={StaticResource DecimalToColonConverter}}" />
                    </StackPanel>

                    <StackPanel HorizontalAlignment="Left" Orientation="Vertical">
                        <TextBlock x:Uid="Quantity" FontSize="16" />
                        <NumberBox
                            Width="180"
                            Minimum="1"
                            SpinButtonPlacementMode="Inline"
                            Value="{x:Bind ViewModel.ScannedProductQty, Mode=TwoWay}" />
                    </StackPanel>

                    <StackPanel HorizontalAlignment="Left" Orientation="Vertical">
                        <TextBlock x:Uid="Price" FontSize="16" />
                        <TextBlock
                            FontSize="24"
                            FontWeight="Bold"
                            Text="{x:Bind ViewModel.ScannedProductTotalPrice, Mode=OneWay, Converter={StaticResource DecimalToColonConverter}}" />
                    </StackPanel>

                    <Button
                        x:Name="AddProductButton"
                        Width="180"
                        Margin="0,32,0,0"
                        HorizontalAlignment="Left"
                        Click="OnAddProductButtonClick"
                        IsEnabled="{x:Bind ViewModel.EnableAddButton, Mode=OneWay}">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon
                                FontFamily="Segoe Fluent Icons"
                                FontSize="16"
                                Glyph="&#xE7BF;" />
                            <TextBlock x:Uid="Add" FontSize="16" />
                        </StackPanel>
                    </Button>
                </StackPanel>

                <RelativePanel Grid.Row="2">
                    <StackPanel
                        Orientation="Vertical"
                        RelativePanel.AlignBottomWithPanel="True"
                        RelativePanel.AlignRightWithPanel="True">
                        <Button
                            Width="180"
                            HorizontalAlignment="Left"
                            Background="Green"
                            Click="OnFinishReceiptButtonClick"
                            Foreground="WhiteSmoke"
                            IsEnabled="{x:Bind ViewModel.EnableFinishButton, Mode=OneWay}">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon
                                    FontFamily="Segoe Fluent Icons"
                                    FontSize="16"
                                    Glyph="&#xE001;" />
                                <TextBlock x:Uid="FinishBtn" FontSize="16" />
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </RelativePanel>
            </Grid>
        </Grid>
    </Grid>
</Page>
